(()=>{var t={43:(t,e,r)=>{"use strict";var s=r(471),a=function(){var t=this,e=t._self._c;return e("v-app",[e("v-toolbar",{attrs:{color:"primary",dark:""}},[e("v-toolbar-title",[t._v("简单在线购物系统")]),e("v-spacer"),e("v-toolbar-items",[e("v-btn",{attrs:{to:"/",text:""}},[t._v("首页")]),e("v-btn",{attrs:{to:"/seller/login",text:""}},[t._v("卖家登录")])],1)],1),e("v-main",[e("router-view")],1),e("v-footer",{attrs:{color:"primary",dark:""}},[e("div",{staticClass:"container"},[e("div",{staticClass:"text-center py-4"},[e("span",[t._v("© "+t._s((new Date).getFullYear())+" 简单在线购物系统")])])])])],1)},o=[];const i={name:"App",data(){return{}}},c=i;var n=r(656),l=(0,n.A)(c,a,o,!1,null,null,null);const d=l.exports;var u=r(173),v=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("v-container",{attrs:{fluid:""}},[e("v-layout",{attrs:{"align-center":"","justify-center":""}},[e("v-flex",{attrs:{xs12:"",sm8:"",md6:""}},[e("v-card",[e("v-card-title",{staticClass:"text-center"},[e("h2",[t._v("商品展示")])]),e("v-card-text",[t.products.length>0?e("v-container",[e("v-layout",{attrs:{wrap:""}},t._l(t.products,function(r){return e("v-flex",{key:r.id,attrs:{xs12:""}},[e("v-card",{staticClass:"mb-4",attrs:{hover:""}},[r.imageUrl?e("v-img",{staticClass:"grey lighten-2",attrs:{src:r.imageUrl,"aspect-ratio":"16/9"}}):e("v-img",{staticClass:"grey lighten-2",attrs:{src:"https://via.placeholder.com/800x450?text=暂无图片","aspect-ratio":"16/9"}}),e("v-card-title",[t._v(t._s(r.name))]),e("v-card-text",[t._v(t._s(r.description))]),e("v-card-actions",[e("v-spacer"),e("v-chip",{attrs:{color:"primary","text-color":"white"}},[t._v("¥"+t._s(r.price.toFixed(2)))]),e("v-btn",{attrs:{disabled:!r.available||r.frozen,color:"success"},on:{click:function(e){return t.viewProduct(r.id)}}},[t._v(" "+t._s(r.frozen?"有人正在购买":"查看详情")+" ")])],1)],1)],1)}),1)],1):e("v-container",[e("v-alert",{attrs:{type:"info",dismissible:""}},[t._v(" 暂无可用商品 ")])],1)],1)],1)],1)],1)],1),e("v-snackbar",{attrs:{color:"error"===t.snackbar.type?"error":"success",timeout:"6000"},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(" "+t._s(t.snackbar.message)+" "),e("v-btn",{attrs:{color:"accent",text:""},on:{click:function(e){t.snackbar.show=!1}}},[t._v(" 关闭 ")])],1)],1)},h=[];const p={name:"Home",data(){return{products:[],snackbar:{show:!1,message:"",type:""}}},mounted(){this.fetchProducts()},methods:{fetchProducts(){this.$http.get("/products").then(t=>{this.products=t.data.map(t=>({...t,available:"AVAILABLE"===t.status,frozen:"FROZEN"===t.status}))}).catch(t=>{console.error("获取商品列表失败:",t),this.snackbar={show:!0,message:"获取商品列表失败",type:"error"}})},viewProduct(t){this.$router.push({name:"product-detail",params:{id:t}})}}},m=p;var f=(0,n.A)(m,v,h,!1,null,"8d7295e0",null);const b=f.exports;var g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"product-detail"},[e("v-container",{attrs:{fluid:""}},[e("v-layout",{attrs:{"align-center":"","justify-center":""}},[e("v-flex",{attrs:{xs12:"",sm8:"",md6:""}},[t.product?e("v-card",[e("v-img",{staticClass:"grey lighten-2",attrs:{src:t.product.imageUrl||"https://via.placeholder.com/800x450?text=暂无图片","aspect-ratio":"16/9"}}),e("v-card-title",[t._v(t._s(t.product.name))]),e("v-card-subtitle",[t._v("价格: ¥"+t._s(t.product.price.toFixed(2)))]),e("v-card-text",[t._v(t._s(t.product.description))]),e("v-card-text",[e("v-chip",{staticClass:"mr-2",attrs:{color:t.product.available?"success":"error","text-color":"white"}},[t._v(" "+t._s(t.product.available?"可购买":"已售出")+" ")]),t.product.frozen?e("v-chip",{attrs:{color:"warning","text-color":"white"}},[t._v(" 有人正在购买 ")]):t._e()],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{disabled:!t.product.available||t.product.frozen,color:"success"},on:{click:t.goToPurchase}},[t._v(" "+t._s(t.product.frozen?"有人正在购买":"我要购买")+" ")]),e("v-btn",{attrs:{color:"primary"},on:{click:t.goBack}},[t._v("返回")])],1)],1):e("v-card",[e("v-card-text",[e("v-alert",{attrs:{type:"error",dismissible:""}},[t._v(" 商品不存在 ")])],1),e("v-card-actions",[e("v-btn",{attrs:{color:"primary"},on:{click:t.goBack}},[t._v("返回")])],1)],1)],1)],1)],1)],1)},_=[];const x={name:"ProductDetail",props:{id:{type:String,required:!0}},data(){return{product:null}},mounted(){this.fetchProduct()},methods:{fetchProduct(){this.$http.get(`/products/${this.id}`).then(t=>{const e=t.data;this.product={...e,available:"AVAILABLE"===e.status,frozen:"FROZEN"===e.status}}).catch(t=>{console.error("获取商品详情失败:",t),this.$snackbar.open({message:"获取商品详情失败",type:"error"})})},goToPurchase(){this.$router.push({name:"purchase-form",params:{id:this.id}})},goBack(){this.$router.go(-1)}}},w=x;var y=(0,n.A)(w,g,_,!1,null,"22a37b06",null);const k=y.exports;var P=function(){var t=this,e=t._self._c;return e("div",{staticClass:"purchase-form"},[e("v-container",{attrs:{fluid:""}},[e("v-layout",{attrs:{"align-center":"","justify-center":""}},[e("v-flex",{attrs:{xs12:"",sm8:"",md6:""}},[e("v-card",[e("v-card-title",{staticClass:"text-center"},[e("h2",[t._v("购买意向")])]),e("v-card-text",[e("v-form",{ref:"purchaseForm",on:{submit:function(e){return e.preventDefault(),t.submitPurchase.apply(null,arguments)}}},[e("v-text-field",{attrs:{label:"姓名",required:"",rules:[t=>!!t||"请输入姓名"]},model:{value:t.form.buyerName,callback:function(e){t.$set(t.form,"buyerName",e)},expression:"form.buyerName"}}),e("v-text-field",{attrs:{label:"联系电话",required:"",rules:[t=>!!t||"请输入联系电话"]},model:{value:t.form.buyerPhone,callback:function(e){t.$set(t.form,"buyerPhone",e)},expression:"form.buyerPhone"}}),e("v-text-field",{attrs:{label:"电子邮箱",required:"",rules:[t=>!!t||"请输入电子邮箱",t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||"请输入有效的电子邮箱"]},model:{value:t.form.buyerEmail,callback:function(e){t.$set(t.form,"buyerEmail",e)},expression:"form.buyerEmail"}}),e("v-text-field",{attrs:{label:"联系地址",multiline:"",rows:"2",required:"",rules:[t=>!!t||"请输入联系地址"]},model:{value:t.form.buyerAddress,callback:function(e){t.$set(t.form,"buyerAddress",e)},expression:"form.buyerAddress"}}),e("v-card-actions",[e("v-btn",{attrs:{type:"submit",color:"success",loading:t.loading}},[t._v(" 提交购买意向 ")]),e("v-btn",{attrs:{color:"primary"},on:{click:t.goBack}},[t._v(" 返回 ")])],1)],1)],1)],1)],1)],1)],1),e("v-snackbar",{attrs:{color:t.snackbar.type,timeout:4e3,bottom:"",right:""},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(" "+t._s(t.snackbar.message)+" "),e("v-btn",{attrs:{color:"white",text:""},on:{click:function(e){t.snackbar.show=!1}}},[t._v("关闭")])],1)],1)},C=[];const F={name:"PurchaseForm",props:{id:{type:String,required:!0}},data(){return{form:{buyerName:"",buyerPhone:"",buyerEmail:"",buyerAddress:"",product:{id:this.id}},loading:!1,snackbar:{show:!1,message:"",type:"info"}}},methods:{submitPurchase(){this.$refs.purchaseForm.validate()&&(this.loading=!0,this.$http.post("/purchase-intents",this.form).then(t=>{this.loading=!1,this.showSnackbar("购买意向已提交，请等待卖家联系","success"),this.$router.push("/")}).catch(t=>{this.loading=!1,console.error("提交购买意向失败:",t),this.showSnackbar(t.response?.data||"提交购买意向失败","error")}))},goBack(){this.$router.go(-1)},showSnackbar(t,e="info"){this.snackbar.message=t,this.snackbar.type=e,this.snackbar.show=!0}}},$=F;var A=(0,n.A)($,P,C,!1,null,"18f48a5c",null);const S=A.exports;var I=function(){var t=this,e=t._self._c;return e("div",{staticClass:"seller-login"},[e("v-container",{attrs:{fluid:""}},[e("v-layout",{attrs:{"align-center":"","justify-center":""}},[e("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[e("v-card",[e("v-card-title",{staticClass:"text-center"},[e("h2",[t._v("卖家登录")])]),e("v-card-text",[e("v-form",{ref:"loginForm",on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[e("v-text-field",{attrs:{label:"用户名",required:"",rules:[t=>!!t||"请输入用户名"]},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),e("v-text-field",{attrs:{label:"密码",type:"password",required:"",rules:[t=>!!t||"请输入密码"]},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),e("v-card-actions",[e("v-btn",{attrs:{type:"submit",color:"primary",block:"",loading:t.loading}},[t._v(" 登录 ")])],1),t.error?e("v-alert",{attrs:{type:"error",dismissible:""},on:{input:function(e){t.error=""}}},[t._v(" "+t._s(t.error)+" ")]):t._e()],1)],1)],1)],1)],1)],1)],1)},D=[];const U={name:"SellerLogin",data(){return{form:{username:"",password:""},error:"",loading:!1}},methods:{login(){this.$refs.loginForm.validate()&&(this.loading=!0,this.error="",this.$http.post("/seller/login",{username:this.form.username,password:this.form.password}).then(t=>{const e=btoa(`${this.form.username}:${this.form.password}`);localStorage.setItem("auth",e),this.loading=!1,this.$router.push("/seller/dashboard")}).catch(t=>{console.error("登录失败:",t),this.loading=!1,this.error=t.response?.data||"登录失败，请检查用户名和密码"}))}}},O=U;var E=(0,n.A)(O,I,D,!1,null,"15319116",null);const B=E.exports;var N=function(){var t=this,e=t._self._c;return e("div",{staticClass:"seller-dashboard"},[e("v-container",{attrs:{fluid:""}},[e("v-toolbar",{attrs:{color:"primary",dark:""}},[e("v-toolbar-title",[t._v("卖家控制面板")]),e("v-spacer"),e("v-toolbar-items",[e("v-btn",{attrs:{to:"/seller/products",text:""}},[t._v("商品管理")]),e("v-btn",{attrs:{to:"/seller/orders",text:""}},[t._v("订单管理")]),e("v-btn",{attrs:{to:"/seller/password",text:""}},[t._v("修改密码")]),e("v-btn",{attrs:{text:""},on:{click:t.logout}},[t._v("退出登录")])],1)],1),e("v-layout",{attrs:{"mt-6":""}},[e("v-flex",{attrs:{xs12:""}},[e("v-card",[e("v-card-title",[e("h3",[t._v("仪表盘")])]),e("v-card-text",[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{attrs:{xs12:"",md4:""}},[e("v-card",{staticClass:"dashboard-card",attrs:{color:"primary",dark:""}},[e("v-card-text",{staticClass:"text-center"},[e("h4",[t._v("当前商品")]),e("p",{staticClass:"dashboard-number"},[t._v(t._s(t.productCount))])])],1)],1),e("v-flex",{attrs:{xs12:"",md4:""}},[e("v-card",{staticClass:"dashboard-card",attrs:{color:"success",dark:""}},[e("v-card-text",{staticClass:"text-center"},[e("h4",[t._v("待处理订单")]),e("p",{staticClass:"dashboard-number"},[t._v(t._s(t.pendingOrderCount))])])],1)],1),e("v-flex",{attrs:{xs12:"",md4:""}},[e("v-card",{staticClass:"dashboard-card",attrs:{color:"info",dark:""}},[e("v-card-text",{staticClass:"text-center"},[e("h4",[t._v("已完成订单")]),e("p",{staticClass:"dashboard-number"},[t._v(t._s(t.completedOrderCount))])])],1)],1)],1),e("v-divider",{staticClass:"my-6"}),e("v-layout",[e("v-flex",{attrs:{xs12:""}},[e("v-card",[e("v-card-title",[t._v("操作指南")]),e("v-card-text",[e("ol",[e("li",[t._v("在商品管理中发布您的商品")]),e("li",[t._v("当有买家表达购买意向时，在订单管理中查看并联系买家")]),e("li",[t._v("完成线下交易后，在订单管理中将订单标记为完成")]),e("li",[t._v("如需修改密码，请前往修改密码页面")])])])],1)],1)],1)],1)],1)],1)],1)],1)],1)},L=[];const q={name:"SellerDashboard",data(){return{productCount:0,pendingOrderCount:0,completedOrderCount:0}},mounted(){this.fetchDashboardData()},methods:{fetchDashboardData(){this.$http.get("/products/seller").then(t=>{this.productCount=t.data.length}).catch(t=>{console.error("获取商品数量失败:",t)}),this.$http.get("/purchase-intents").then(t=>{const e=t.data;this.pendingOrderCount=e.filter(t=>!t.completed&&!t.canceled).length,this.completedOrderCount=e.filter(t=>t.completed).length}).catch(t=>{console.error("获取订单统计失败:",t)})},logout(){localStorage.removeItem("auth"),this.$router.push("/seller/login")}}},j=q;var T=(0,n.A)(j,N,L,!1,null,"27ada3ae",null);const z=T.exports;var R=function(){var t=this,e=t._self._c;return e("div",{staticClass:"product-management"},[e("v-container",{attrs:{fluid:""}},[e("v-toolbar",{attrs:{color:"primary",dark:""}},[e("v-toolbar-title",[t._v("商品管理")]),e("v-spacer"),e("v-toolbar-items",[e("v-btn",{attrs:{color:"success",text:""},on:{click:function(e){t.showAddDialog=!0}}},[t._v("+ 添加商品")]),e("v-btn",{attrs:{to:"/seller/dashboard",text:""}},[t._v("返回仪表盘")])],1)],1),e("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.showAddDialog,callback:function(e){t.showAddDialog=e},expression:"showAddDialog"}},[e("v-card",[e("v-card-title",[t._v(t._s(t.editingProduct?"编辑商品":"添加商品"))]),e("v-card-text",[e("v-form",{ref:"productForm",on:{submit:function(e){return e.preventDefault(),t.saveProduct.apply(null,arguments)}}},[e("v-text-field",{attrs:{label:"商品名称",required:"",rules:[t=>!!t||"请输入商品名称"]},model:{value:t.productForm.name,callback:function(e){t.$set(t.productForm,"name",e)},expression:"productForm.name"}}),e("v-text-field",{attrs:{label:"商品描述",required:"",multiline:"",rows:"3",rules:[t=>!!t||"请输入商品描述"]},model:{value:t.productForm.description,callback:function(e){t.$set(t.productForm,"description",e)},expression:"productForm.description"}}),t.editingProduct&&t.productForm.imageUrl?t._e():e("div",{staticClass:"mb-4"},[e("v-file-input",{attrs:{label:"选择本地图片",accept:"image/*"},on:{change:t.handleFileChange},model:{value:t.selectedFile,callback:function(e){t.selectedFile=e},expression:"selectedFile"}})],1),t.productForm.imageUrl?e("div",{staticClass:"mb-4"},[e("v-img",{staticClass:"grey lighten-2 mb-2",attrs:{src:t.productForm.imageUrl,"aspect-ratio":"16/9"}}),e("v-btn",{attrs:{color:"error",text:""},on:{click:t.clearImage}},[t._v("清除图片")])],1):t._e(),e("v-text-field",{attrs:{label:"商品价格",type:"number",required:"",rules:[t=>!!t||"请输入商品价格",t=>!isNaN(Number(t))&&Number(t)>0||"请输入有效的价格"]},model:{value:t.productForm.price,callback:function(e){t.$set(t.productForm,"price",e)},expression:"productForm.price"}}),e("v-card-actions",[e("v-btn",{attrs:{type:"submit",color:"primary",loading:t.saving}},[t._v(" "+t._s(t.editingProduct?"更新":"保存")+" ")]),e("v-btn",{attrs:{color:"secondary"},on:{click:t.cancelAdd}},[t._v("取消")])],1)],1)],1)],1)],1),e("v-layout",{attrs:{"mt-6":""}},[e("v-flex",{attrs:{xs12:""}},[e("v-card",[e("v-card-title",[e("h3",[t._v("我的商品")])]),e("v-card-text",[t.products.length>0?e("v-container",[e("v-layout",{attrs:{wrap:""}},t._l(t.products,function(r){return e("v-flex",{key:r.id,attrs:{xs12:""}},[e("v-card",{staticClass:"mb-4",attrs:{hover:""}},[e("v-img",{staticClass:"grey lighten-2",attrs:{src:r.imageUrl||"https://via.placeholder.com/800x450?text=暂无图片","aspect-ratio":"16/9"}}),e("v-card-title",[t._v(t._s(r.name))]),e("v-card-text",[t._v(t._s(r.description))]),e("v-card-text",[e("v-chip",{staticClass:"mr-2",attrs:{color:t.getProductStatusColor(r),"text-color":"white"}},[t._v(" "+t._s(r.statusText)+" ")]),r.frozen?e("v-chip",{attrs:{color:"warning","text-color":"white"}},[t._v(" 已冻结 ")]):t._e(),e("v-chip",{staticClass:"ml-2",attrs:{color:"primary","text-color":"white"}},[t._v(" ¥"+t._s(r.price.toFixed(2))+" ")])],1),e("v-card-actions",[r.available?e("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.editProduct(r)}}},[t._v("编辑")]):t._e(),r.frozen?t._e():e("v-btn",{attrs:{color:r.available?"error":"success"},on:{click:function(e){return t.toggleProductStatus(r)}}},[t._v(" "+t._s(r.available?"下架":"上架")+" ")]),e("v-spacer")],1)],1)],1)}),1)],1):e("v-container",[e("v-alert",{attrs:{type:"info",dismissible:""}},[t._v(" 暂无商品，请添加新商品 ")])],1)],1)],1)],1)],1),e("v-snackbar",{attrs:{color:t.snackbar.type,timeout:4e3,bottom:"",right:""},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(" "+t._s(t.snackbar.message)+" "),e("v-btn",{attrs:{color:"white",text:""},on:{click:function(e){t.snackbar.show=!1}}},[t._v("关闭")])],1)],1)],1)},V=[];const M={name:"ProductManagement",data(){return{showAddDialog:!1,editingProduct:null,productForm:{name:"",description:"",imageUrl:"",price:""},selectedFile:null,saving:!1,products:[],snackbar:{show:!1,message:"",type:"info"}}},mounted(){this.fetchProducts()},methods:{handleFileChange(t){if(t){const e=new FormData;e.append("file",t),this.$http.post("/files/upload",e,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{this.productForm.imageUrl=t.data}).catch(t=>{console.error("文件上传失败:",t),this.showSnackbar("图片上传失败","error")})}},clearImage(){this.productForm.imageUrl="",this.selectedFile=null},saveProduct(){if(!this.$refs.productForm.validate())return;this.saving=!0;const t={name:this.productForm.name,description:this.productForm.description,imageUrl:this.productForm.imageUrl,price:parseFloat(this.productForm.price)};this.editingProduct?this.$http.put(`/products/${this.editingProduct.id}`,t).then(()=>{this.saving=!1,this.fetchProducts(),this.cancelAdd(),this.showSnackbar("商品更新成功","success")}).catch(t=>{this.saving=!1,console.error("更新商品失败:",t),this.showSnackbar("更新商品失败","error")}):this.$http.post("/products",t).then(()=>{this.saving=!1,this.fetchProducts(),this.cancelAdd(),this.showSnackbar("商品添加成功","success")}).catch(t=>{this.saving=!1,console.error("添加商品失败:",t),this.showSnackbar("添加商品失败","error")})},showSnackbar(t,e="info"){this.snackbar.message=t,this.snackbar.type=e,this.snackbar.show=!0},fetchProducts(){this.$http.get("/products/seller").then(t=>{this.products=t.data.map(t=>{if(t.available="AVAILABLE"===t.status,t.frozen="FROZEN"===t.status,t.statusText="AVAILABLE"===t.status?"可购买":"SOLD"===t.status?"已售出":"FROZEN"===t.status?"已冻结":"UNPUBLISHED"===t.status?"已下架":"未知状态",t.imageUrl)if(t.imageUrl.startsWith("http"));else if(t.imageUrl.startsWith("file://")){const e=t.imageUrl.split("\\").pop().split("/").pop();t.imageUrl="http://localhost:8080/picture/"+e}else t.imageUrl.startsWith("/uploads/")?t.imageUrl="http://localhost:8080"+t.imageUrl:t.imageUrl="http://localhost:8080/picture/"+t.imageUrl;return t})}).catch(t=>{console.error("获取商品列表失败:",t),this.showSnackbar("获取商品列表失败","error")})},editProduct(t){this.editingProduct=t,this.productForm={name:t.name,description:t.description,imageUrl:t.imageUrl,price:t.price.toString()},this.showAddDialog=!0},cancelAdd(){this.showAddDialog=!1,this.editingProduct=null,this.productForm={name:"",description:"",imageUrl:"",price:""},this.$refs.productForm.reset()},toggleProductStatus(t){const e=!t.available,r=e?`/products/${t.id}/publish`:`/products/${t.id}/unpublish`;this.$http.put(r).then(t=>{this.fetchProducts(),this.showSnackbar(e?"商品已上架":"商品已下架","success")}).catch(t=>{console.error("更新商品状态失败:",t),this.showSnackbar("更新商品状态失败","error")})},getProductStatusColor(t){switch(t.status){case"AVAILABLE":return"success";case"SOLD":return"error";case"FROZEN":return"warning";case"UNPUBLISHED":return"secondary";default:return"info"}}}},Z=M;var H=(0,n.A)(Z,R,V,!1,null,"56fc7b22",null);const W=H.exports;var Y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order-management"},[e("v-container",{attrs:{fluid:""}},[e("v-toolbar",{attrs:{color:"primary",dark:""}},[e("v-toolbar-title",[t._v("订单管理")]),e("v-spacer"),e("v-toolbar-items",[e("v-btn",{attrs:{to:"/seller/products",text:""}},[t._v("商品管理")]),e("v-btn",{attrs:{to:"/seller/dashboard",text:""}},[t._v("返回仪表盘")])],1)],1),e("v-layout",{attrs:{"mt-6":""}},[e("v-flex",{attrs:{xs12:""}},[e("v-card",[e("v-card-title",[e("h3",[t._v("购买意向列表")])]),e("v-card-text",[t.purchaseIntents.length>0?e("v-container",[e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.purchaseIntents,"item-key":"id"},scopedSlots:t._u([{key:"item.status",fn:function({item:r}){return[e("v-chip",{attrs:{color:t.getStatusColor(r),"text-color":"white"}},[t._v(" "+t._s(t.getStatusText(r))+" ")])]}},{key:"item.actions",fn:function({item:r}){return[r.completed||r.canceled?t._e():e("v-btn",{attrs:{color:"success"},on:{click:function(e){return t.completePurchase(r.id)}}},[t._v(" 完成交易 ")]),r.completed||r.canceled?t._e():e("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.cancelPurchase(r.id)}}},[t._v(" 取消交易 ")]),e("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.showBuyerInfo(r)}}},[t._v(" 查看买家信息 ")])]}}],null,!1,2743942517)})],1):e("v-container",[e("v-alert",{attrs:{type:"info",dismissible:""}},[t._v(" 暂无购买意向 ")])],1)],1)],1)],1)],1),e("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.showBuyerInfoDialog,callback:function(e){t.showBuyerInfoDialog=e},expression:"showBuyerInfoDialog"}},[t.selectedIntent?e("v-card",[e("v-card-title",[t._v("买家信息")]),e("v-card-text",[e("v-list",[e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",[t._v("商品名称")]),e("v-list-item-subtitle",[t._v(t._s(t.selectedIntent.product.name))])],1)],1),e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",[t._v("买家姓名")]),e("v-list-item-subtitle",[t._v(t._s(t.selectedIntent.buyerName))])],1)],1),e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",[t._v("联系电话")]),e("v-list-item-subtitle",[t._v(t._s(t.selectedIntent.buyerPhone))])],1)],1),e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",[t._v("电子邮箱")]),e("v-list-item-subtitle",[t._v(t._s(t.selectedIntent.buyerEmail))])],1)],1),e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",[t._v("联系地址")]),e("v-list-item-subtitle",[t._v(t._s(t.selectedIntent.buyerAddress))])],1)],1),e("v-list-item",[e("v-list-item-content",[e("v-list-item-title",[t._v("提交时间")]),e("v-list-item-subtitle",[t._v(t._s(t.formatDate(t.selectedIntent.createTime)))])],1)],1)],1)],1),e("v-card-actions",[e("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.showBuyerInfoDialog=!1}}},[t._v("关闭")])],1)],1):t._e()],1)],1)],1)},G=[];const J={name:"OrderManagement",data(){return{purchaseIntents:[],showBuyerInfoDialog:!1,selectedIntent:null,headers:[{text:"ID",value:"id"},{text:"商品名称",value:"product.name"},{text:"买家姓名",value:"buyerName"},{text:"提交时间",value:"createTime",sortable:!1},{text:"状态",value:"status",sortable:!1},{text:"操作",value:"actions",sortable:!1}],snackbar:{show:!1,message:"",type:"success"}}},mounted(){this.fetchPurchaseIntents()},methods:{showSnackbar(t,e="success"){this.snackbar.message=t,this.snackbar.type=e,this.snackbar.show=!0},fetchPurchaseIntents(){this.$http.get("/purchase-intents").then(t=>{this.purchaseIntents=t.data}).catch(t=>{console.error("获取购买意向列表失败:",t),this.showSnackbar("获取购买意向列表失败","error")})},completePurchase(t){confirm("确认完成此交易吗？完成后商品将下架。")&&this.$http.put(`/purchase-intents/${t}/complete`).then(t=>{this.fetchPurchaseIntents(),this.showSnackbar("交易已完成")}).catch(t=>{console.error("完成交易失败:",t),this.showSnackbar("完成交易失败","error")})},cancelPurchase(t){confirm("确认取消此交易吗？取消后商品将解冻。")&&this.$http.put(`/purchase-intents/${t}/cancel`).then(t=>{this.fetchPurchaseIntents(),this.showSnackbar("交易已取消")}).catch(t=>{console.error("取消交易失败:",t),this.showSnackbar("取消交易失败","error")})},showBuyerInfo(t){this.selectedIntent=t,this.showBuyerInfoDialog=!0},getStatusColor(t){return t.completed?"success":t.canceled?"error":"warning"},getStatusText(t){return t.completed?"已完成":t.canceled?"已取消":"处理中"},formatDate(t){if(!t)return"";const e=new Date(t);return e.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}}},K=J;var Q=r(86),X=r.n(Q),tt=(0,n.A)(K,Y,G,!1,null,"c5e287b8",null);"function"===typeof X()&&X()(tt);const et=tt.exports;var rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"change-password"},[e("v-container",{attrs:{fluid:""}},[e("v-layout",{attrs:{"align-center":"","justify-center":""}},[e("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[e("v-card",[e("v-card-title",{staticClass:"text-center"},[e("h2",[t._v("修改密码")])]),e("v-card-text",[e("v-form",{ref:"passwordForm",on:{submit:function(e){return e.preventDefault(),t.changePassword.apply(null,arguments)}}},[e("v-text-field",{attrs:{label:"当前密码",type:"password",required:"",rules:[t=>!!t||"请输入当前密码"]},model:{value:t.form.oldPassword,callback:function(e){t.$set(t.form,"oldPassword",e)},expression:"form.oldPassword"}}),e("v-text-field",{attrs:{label:"新密码",type:"password",required:"",rules:[t=>!!t||"请输入新密码",t=>t.length>=6||"新密码长度至少为6位"]},model:{value:t.form.newPassword,callback:function(e){t.$set(t.form,"newPassword",e)},expression:"form.newPassword"}}),e("v-text-field",{attrs:{label:"确认新密码",type:"password",required:"",rules:[t=>!!t||"请确认新密码",e=>e===t.form.newPassword||"两次输入的密码不一致"]},model:{value:t.form.confirmPassword,callback:function(e){t.$set(t.form,"confirmPassword",e)},expression:"form.confirmPassword"}}),e("v-card-actions",[e("v-btn",{attrs:{type:"submit",color:"primary",block:"",loading:t.loading}},[t._v(" 确认修改 ")]),e("v-btn",{attrs:{to:"/seller/dashboard",color:"secondary",block:""}},[t._v(" 返回仪表盘 ")])],1),t.error?e("v-alert",{attrs:{type:"error",dismissible:""},on:{input:function(e){t.error=""}}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.success?e("v-alert",{attrs:{type:"success",dismissible:""},on:{input:function(e){t.success=""}}},[t._v(" "+t._s(t.success)+" ")]):t._e()],1)],1)],1)],1)],1)],1)],1)},st=[];const at={name:"ChangePassword",data(){return{form:{oldPassword:"",newPassword:"",confirmPassword:""},error:"",success:"",loading:!1}},methods:{changePassword(){this.$refs.passwordForm.validate()&&(this.loading=!0,this.error="",this.success="",this.$http.put("/seller/password",{oldPassword:this.form.oldPassword,newPassword:this.form.newPassword}).then(t=>{this.loading=!1,this.success="密码修改成功",this.form={oldPassword:"",newPassword:"",confirmPassword:""},this.$refs.passwordForm.reset()}).catch(t=>{this.loading=!1,console.error("修改密码失败:",t),this.error=t.response?.data||"修改密码失败"}))}}},ot=at;var it=(0,n.A)(ot,rt,st,!1,null,"0ad5514b",null);const ct=it.exports;function nt(t,e,r){s["default"].prototype.$validateAuth()?r():(localStorage.removeItem("auth"),r("/seller/login"))}s["default"].use(u.Ay);const lt=new u.Ay({mode:"history",base:"/",routes:[{path:"/",name:"home",component:b},{path:"/product/:id",name:"product-detail",component:k,props:!0},{path:"/product/:id/purchase",name:"purchase-form",component:S,props:!0},{path:"/seller/login",name:"seller-login",component:B},{path:"/seller/dashboard",name:"seller-dashboard",component:z,beforeEnter:nt},{path:"/seller/products",name:"product-management",component:W,beforeEnter:nt},{path:"/seller/orders",name:"order-management",component:et,beforeEnter:nt},{path:"/seller/password",name:"change-password",component:ct,beforeEnter:nt}]});var dt=r(600),ut=r.n(dt),vt=(r(301),r(505)),ht=r.n(vt);ht().defaults.baseURL={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_BASE_URL||"http://localhost:8080",ht().interceptors.request.use(t=>{const e=localStorage.getItem("auth");return e&&(t.headers.Authorization=`Basic ${e}`),t}),ht().interceptors.response.use(t=>t,t=>(t.response&&401===t.response.status&&(localStorage.removeItem("auth"),"/seller/login"!==lt.currentRoute.path&&lt.push("/seller/login")),Promise.reject(t))),s["default"].prototype.$validateAuth=function(){const t=localStorage.getItem("auth");if(!t)return!1;try{const e=atob(t);return e.includes(":")}catch(e){return!1}},s["default"].use(ut()),s["default"].prototype.$http=ht(),s["default"].config.productionTip=!1,new s["default"]({router:lt,vuetify:new(ut())({theme:{themes:{light:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}}),render:t=>t(d)}).$mount("#app")},86:()=>{}},e={};function r(s){var a=e[s];if(void 0!==a)return a.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,r),o.exports}r.m=t,(()=>{var t=[];r.O=(e,s,a,o)=>{if(!s){var i=1/0;for(d=0;d<t.length;d++){for(var[s,a,o]=t[d],c=!0,n=0;n<s.length;n++)(!1&o||i>=o)&&Object.keys(r.O).every(t=>r.O[t](s[n]))?s.splice(n--,1):(c=!1,o<i&&(i=o));if(c){t.splice(d--,1);var l=a();void 0!==l&&(e=l)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[s,a,o]}})(),(()=>{r.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return r.d(e,{a:e}),e}})(),(()=>{r.d=(t,e)=>{for(var s in e)r.o(e,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{r.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{var t={524:0};r.O.j=e=>0===t[e];var e=(e,s)=>{var a,o,[i,c,n]=s,l=0;if(i.some(e=>0!==t[e])){for(a in c)r.o(c,a)&&(r.m[a]=c[a]);if(n)var d=n(r)}for(e&&e(s);l<i.length;l++)o=i[l],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return r.O(d)},s=self["webpackChunksimple_shopping_frontend"]=self["webpackChunksimple_shopping_frontend"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var s=r.O(void 0,[504],()=>r(43));s=r.O(s)})();
//# sourceMappingURL=app.d994115d.js.map